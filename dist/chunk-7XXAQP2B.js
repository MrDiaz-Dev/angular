import{a as se,b as re}from"./chunk-H4Q47E76.js";import{a as le}from"./chunk-6X2M4KTX.js";import{a as de}from"./chunk-F3M6RHPZ.js";import{a as ae}from"./chunk-P7MOWZNG.js";import"./chunk-FZ42FID5.js";import{a as ne}from"./chunk-EYPFD7BP.js";import"./chunk-224O6KQT.js";import{a as z}from"./chunk-DYKERIVD.js";import{a as ie}from"./chunk-N25QT2AP.js";import{C as $,E as ee,N as te,S as oe,U as E,s as k}from"./chunk-KMAW7RSO.js";import"./chunk-2A4Z2JYH.js";import{n as K,z as Q}from"./chunk-SR3JLMZB.js";import{A as X,D as Y,E as Z,k as G,y as J}from"./chunk-ZGX2TZUZ.js";import{Hb as c,Ib as A,Jb as T,K as B,Lb as v,Mb as g,Nb as L,Oa as l,Pb as V,Qb as b,U as y,Y as M,Z as R,Za as w,_a as U,eb as f,ga as N,gb as p,ia as m,ja as _,jb as h,lb as C,pa as F,qa as O,qb as r,rb as n,sb as u,sc as x,tc as D,v as H,wb as S,xb as q,yb as a,z as W}from"./chunk-FFU3QAVA.js";import"./chunk-CWTPBX7D.js";function j(t,d){let e=!d?.manualCleanup;e&&!d?.injector&&N(j);let s=e?d?.injector?.get(F)??y(F):null,o;d?.requireSync?o=w({kind:0}):o=w({kind:1,value:d?.initialValue});let i=t.subscribe({next:P=>o.set({kind:1,value:P}),error:P=>{if(d?.rejectErrors)throw P;o.set({kind:2,error:P})}});return s?.onDestroy(i.unsubscribe.bind(i)),x(()=>{let P=o();switch(P.kind){case 1:return P.value;case 2:throw P.error;case 0:throw new B(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var me=()=>({width:"100%",maxWidth:"280px",aspectRatio:"1",borderRadius:"10%",objectFit:"cover",boxShadow:"0 0 5px 0 rgba(0, 0, 0, 0.2)"}),I=()=>({width:"-webkit-fill-available"}),ce=(()=>{class t{constructor(){this.datosPersonales=U(),this.datosComunesIdTipo=O(),this.tituloSituacionLaboralActualPMessage=x(()=>[{severity:"info",summary:`${this.datosComunesIdTipo().idCategoria.nombre}`,detail:`${this.datosComunesIdTipo().nombre}`,icon:"pi pi-briefcase"}])}cargarFotografiaURL(){return this.datosPersonales()?.fotografia?z.STORAGE_URL+this.datosPersonales()?.fotografia:"assets/images/notImage.png"}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=R({type:t,selectors:[["app-cabecera-datos-personales"]],inputs:{datosPersonales:[M.SignalBased,"datosPersonales"],datosComunesIdTipo:[M.SignalBased,"datosComunesIdTipo"]},outputs:{datosPersonales:"datosPersonalesChange"},standalone:!0,features:[V],decls:39,vars:27,consts:[[1,"grid"],[1,"col-12","grid","pb-0",2,"width","-webkit-fill-available"],[1,"col-12","md:col-4","xl:col-3","pb-0","flex","align-items-center","justify-content-center"],[1,"flex","flex-column","justify-content-center","mx-4",2,"min-height","230px","min-width","190px"],["alt","avatar","loading","lazy",1,"rounded","float-right","img-thumbnail","img-fluid",3,"src","imageStyle","preview","pTooltip"],[1,"col-12","md:col-8","pb-0","mt-3","md:mt-0"],[1,"w-full","h-full","flex","align-items-center"],[1,"w-full"],[1,"field","grid"],["for","nombre",1,"col-fixed","custom-col-fixed-cabecera-label"],[1,"col-fixed","custom-col-fixed-cabecera-value-text"],["id","nombre"],["for","apellido1",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","apellido1"],["for","apellido2",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","apellido2"],["for","dniNie",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","dniNie"],["for","numeroTarjeta",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","numeroTarjeta"],["styleClass","titulo-situacion",3,"value","closable"]],template:function(s,o){s&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"p-image",4),n()(),r(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),c(10," Nombre "),n(),r(11,"div",10)(12,"span",11),c(13),n()()(),r(14,"div",8)(15,"label",12),c(16," 1er apellido "),n(),r(17,"div",10)(18,"span",13),c(19),n()()(),r(20,"div",8)(21,"label",14),c(22," 2do apellido "),n(),r(23,"div",10)(24,"span",15),c(25),n()()(),r(26,"div",8)(27,"label",16),c(28," DNI "),n(),r(29,"div",10)(30,"span",17),c(31),n()()(),r(32,"div",8)(33,"label",18),c(34," Numero Tarjeta "),n(),r(35,"div",10)(36,"span",19),c(37),n()()(),u(38,"p-messages",20),n()()()()()),s&2&&(l(4),p("src",o.cargarFotografiaURL())("imageStyle",b(21,me))("preview",!0)("pTooltip",o.cargarFotografiaURL()==="assets/images/notImage.png"?"No hay imagen del personal":"Ver imagen del personal"),l(8),h(b(22,I)),l(),T(" ",o.datosPersonales().nombre," "),l(5),h(b(23,I)),l(),T(" ",o.datosPersonales().apellido1," "),l(5),h(b(24,I)),l(),T(" ",o.datosPersonales().apellido2," "),l(5),h(b(25,I)),l(),T(" ",o.datosPersonales().dniNie," "),l(5),h(b(26,I)),l(),T(" ",o.datosPersonales().numeroTarjeta," "),l(),p("value",o.tituloSituacionLaboralActualPMessage())("closable",!1))},dependencies:[E,$,k,te],encapsulation:2})}}return t})();var _e=()=>({position:"sticky",top:"5rem",background:"var(--surface-ground)",zIndex:10,paddingTop:"0.5rem"}),Ce=()=>({width:"2rem",height:"100%"});function ge(t,d){t&1&&u(0,"p-progressSpinner",7),t&2&&h(b(2,Ce))}function be(t,d){if(t&1){let e=S();r(0,"div",3)(1,"p-button",4),q("onClick",function(){m(e);let o=a(2);return _(o.back())}),n(),r(2,"h3",5),c(3),n(),f(4,ge,1,3,"p-progressSpinner",6),n()}if(t&2){let e=a(2);l(3),A(e.titulo()),l(),C(4,e.submitLoading()?4:-1)}}function fe(t,d){if(t&1&&u(0,"p-button",8)(1,"p-button",9)(2,"p-button",10)(3,"p-button",11),t&2){let e=a(2);p("routerLink","/personal/datos-personales/"+e.idPersona())("outlined",e.page()!==1),l(),p("routerLink","/personal/datos-laborales/"+e.idPersona())("outlined",e.page()!==2),l(),p("routerLink","/personal/situacion-laboral/"+e.idPersona())("outlined",e.page()!==3),l(),p("routerLink","/personal/plantillas/"+e.idPersona())("outlined",e.page()!==4)}}function he(t,d){if(t&1){let e=S();r(0,"app-datos-personales",13),L("datosPersonalesChange",function(o){m(e);let i=a(3);return g(i.datosPersonales,o)||(i.datosPersonales=o),_(o)})("submitLoadingChange",function(o){m(e);let i=a(3);return g(i.submitLoading,o)||(i.submitLoading=o),_(o)}),n()}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales)("submitLoading",e.submitLoading)}}function xe(t,d){if(t&1&&f(0,he,1,2,"app-datos-personales",12),t&2){let e=a(2);C(0,e.datosPersonales()?0:-1)}}function Pe(t,d){if(t&1){let e=S();r(0,"app-cabecera-datos-personales",15),L("datosPersonalesChange",function(o){m(e);let i=a(3);return g(i.datosPersonales,o)||(i.datosPersonales=o),_(o)}),n(),u(1,"hr")(2,"br")}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales),p("datosComunesIdTipo",e.datosComunes().idTipo)}}function ye(t,d){if(t&1){let e=S();r(0,"app-datos-comunes",16),L("datosComunesChange",function(o){m(e);let i=a(3);return g(i.datosComunes,o)||(i.datosComunes=o),_(o)})("submitLoadingChange",function(o){m(e);let i=a(3);return g(i.submitLoading,o)||(i.submitLoading=o),_(o)}),n()}if(t&2){let e=a(3);v("datosComunes",e.datosComunes)("submitLoading",e.submitLoading),p("idPersona",e.idPersona())}}function we(t,d){if(t&1&&f(0,Pe,3,2)(1,ye,1,3,"app-datos-comunes",14),t&2){let e=a(2);C(0,e.datosPersonales()&&e.datosComunes()?0:-1),l(),C(1,e.datosComunes()?1:-1)}}function Se(t,d){if(t&1){let e=S();r(0,"app-cabecera-datos-personales",15),L("datosPersonalesChange",function(o){m(e);let i=a(3);return g(i.datosPersonales,o)||(i.datosPersonales=o),_(o)}),n(),u(1,"hr")(2,"br")}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales),p("datosComunesIdTipo",e.datosComunes().idTipo)}}function ve(t,d){if(t&1){let e=S();r(0,"app-situacion-laboral",18),L("situacionLaboralChange",function(o){m(e);let i=a(3);return g(i.situacionLaboral,o)||(i.situacionLaboral=o),_(o)})("submitLoadingChange",function(o){m(e);let i=a(3);return g(i.submitLoading,o)||(i.submitLoading=o),_(o)}),n()}if(t&2){let e=a(3);v("situacionLaboral",e.situacionLaboral)("submitLoading",e.submitLoading)}}function Le(t,d){if(t&1&&f(0,Se,3,2)(1,ve,1,2,"app-situacion-laboral",17),t&2){let e=a(2);C(0,e.datosPersonales()&&e.datosComunes()?0:-1),l(),C(1,e.situacionLaboral()?1:-1)}}function Te(t,d){if(t&1){let e=S();r(0,"app-cabecera-datos-personales",15),L("datosPersonalesChange",function(o){m(e);let i=a(3);return g(i.datosPersonales,o)||(i.datosPersonales=o),_(o)}),n(),u(1,"hr")(2,"br")}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales),p("datosComunesIdTipo",e.datosComunes().idTipo)}}function De(t,d){if(t&1&&(f(0,Te,3,2),u(1,"app-plantillas")),t&2){let e=a(2);C(0,e.datosPersonales()&&e.datosComunes()?0:-1)}}function Ie(t,d){if(t&1&&(r(0,"div")(1,"p-toolbar",0),f(2,be,5,2,"ng-template",1)(3,fe,4,8,"ng-template",2),n(),u(4,"hr"),n(),f(5,xe,1,1)(6,we,2,2)(7,Le,2,2)(8,De,2,1)),t&2){let e,s=a();h(b(3,_e)),l(5),C(5,(e=s.page())===1?5:e===2?6:e===3?7:e===4?8:-1)}}function Re(t,d){t&1&&(r(0,"div",19),u(1,"p-progressSpinner"),n())}var ut=(()=>{class t{constructor(){this.router=y(Y),this.datosPersonalesService=y(ne),this.datosComunesService=y(se),this.messageService=y(ie),this.title=y(J),this.urlState=j(this.router.events.pipe(H(e=>e instanceof X))),this.idPersona=x(()=>this.urlState()&&this.urlState().url.split("/")[3]?(sessionStorage.setItem("idPersona",this.urlState().url.split("/")[3]),this.urlState().url.split("/")[3]):this.router.url.split("/")[3]?(sessionStorage.setItem("idPersona",this.router.url.split("/")[3]),this.router.url.split("/")[3]):sessionStorage.getItem("idPersona")),this.page=x(()=>this.urlState()?this.urlState().url.includes("datos-personales")?(this.title.setTitle(`RRHH - Datos Personales (${this.idPersona()})`),1):this.urlState().url.includes("datos-laborales")?(this.title.setTitle(`RRHH - Datos Laborales (${this.idPersona()})`),2):this.urlState().url.includes("situacion-laboral")?(this.title.setTitle(`RRHH - Situaci\xF3n Laboral (${this.idPersona()})`),3):(this.title.setTitle(`RRHH - Plantillas (${this.idPersona()})`),4):this.router.url.includes("datos-personales")?(this.title.setTitle(`RRHH - Datos Personales (${this.idPersona()})`),1):this.router.url.includes("datos-laborales")?(this.title.setTitle(`RRHH - Datos Laborales (${this.idPersona()})`),2):this.router.url.includes("situacion-laboral")?(this.title.setTitle(`RRHH - Situaci\xF3n Laboral (${this.idPersona()})`),3):(this.title.setTitle(`RRHH - Plantillas (${this.idPersona()})`),4)),this.titulo=x(()=>this.page()===1?"Datos Personales":this.page()===2?"Datos Laborales":this.page()===3?"Situation Laboral":"Plantillas"),this.datosPersonales=w(null),this.datosComunes=w(null),this.situacionLaboral=w(null),this.submitLoading=w(!1),this.loading=x(()=>!!this.datosPersonales()||!!this.datosComunes()),D(()=>{this.cargarDatos()},{allowSignalWrites:!0}),D(()=>{console.warn("Cambiaron los datos personales",this.datosPersonales())}),D(()=>{console.warn("Cambiaron los datos comunes",this.datosComunes())}),D(()=>{console.warn("Cambiaron la situacion laboral",this.situacionLaboral())})}ngOnInit(){console.warn("Modulo de Personal")}cargarDatos(){this.cargarDatosPersonales(),this.cargarDatosComunes()}cargarDatosPersonales(){this.datosPersonales.set(null),this.datosPersonalesService.get(this.idPersona()).pipe(W(1)).subscribe({next:e=>{this.datosPersonales.set(e)},error:e=>{console.error(e),this.messageService.error(e.error.message??"Error desconocido al cargar los datos personales")}})}cargarDatosComunes(){this.datosComunes.set(null),this.datosComunesService.get(this.idPersona()).pipe(W(1)).subscribe({next:e=>{this.datosComunes.set(e)},error:e=>{console.error(e),this.messageService.error(e.error.message??"Error desconocido al cargar los datos comunes")}})}back(){let e=sessionStorage.getItem("previousPersonalPage");e?this.router.navigateByUrl(e):this.router.navigate(["/"])}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=R({type:t,selectors:[["app-personal"]],standalone:!0,features:[V],decls:2,vars:1,consts:[["styleClass","toolbar-sin-bordes"],["pTemplate","left"],["pTemplate","right"],[1,"my-2","flex","flex-row","align-items-center"],["type","button","icon","pi pi-arrow-left","pTooltip","Volver a la b\xFAsqueda","tooltipPosition","top","styleClass","p-button-rounded mr-2",3,"onClick"],[1,"m-0"],["styleClass","ml-3","strokeWidth","6",3,"style"],["styleClass","ml-3","strokeWidth","6"],["icon","pi pi-user","label","Datos Personales","pTooltip","Ver datos personales","tooltipPosition","top","styleClass","mr-2",3,"routerLink","outlined"],["icon","pi pi-book","label","Datos Laborales","pTooltip","Ver datos personales","tooltipPosition","top","styleClass","mr-2",3,"routerLink","outlined"],["icon","pi pi-briefcase","label","Situacion Laboral","pTooltip","Ver datos personales","tooltipPosition","top","styleClass","mr-2",3,"routerLink","outlined"],["icon","pi pi-file-export","label","Plantillas","pTooltip","Ver plantillas","tooltipPosition","top",3,"routerLink","outlined"],[3,"datosPersonales","submitLoading"],[3,"datosPersonalesChange","submitLoadingChange","datosPersonales","submitLoading"],[3,"datosComunes","submitLoading","idPersona"],[3,"datosPersonalesChange","datosPersonales","datosComunesIdTipo"],[3,"datosComunesChange","submitLoadingChange","datosComunes","submitLoading","idPersona"],[3,"situacionLaboral","submitLoading"],[3,"situacionLaboralChange","submitLoadingChange","situacionLaboral","submitLoading"],[1,"hold-transition","login-page","flex","justify-content-center","align-items-center",2,"height","80dvh"]],template:function(s,o){s&1&&f(0,Ie,9,4)(1,Re,2,0),s&2&&C(0,o.loading()?0:1)},dependencies:[G,E,K,Q,ee,Z,k,oe,ae,re,le,de,ce]})}}return t})();export{ut as PersonalComponent};
