import{a as ie,b as ae}from"./chunk-JGQWAOYX.js";import{a as se}from"./chunk-SVJPVA6G.js";import{a as re}from"./chunk-UNQX7YW3.js";import{a as ne}from"./chunk-4XNLT7H5.js";import"./chunk-5CTBJP5H.js";import{a as oe}from"./chunk-5NQXMXEA.js";import"./chunk-NKIOLDQ3.js";import{a as z}from"./chunk-DYKERIVD.js";import{a as te}from"./chunk-EKIJYKJQ.js";import{E as Z,N as $,S as ee,U as I,s as V}from"./chunk-KYTGM7MW.js";import"./chunk-OKBA4QQN.js";import{j as K}from"./chunk-TLPBJLCK.js";import{n as J}from"./chunk-OKPV5AN6.js";import{A as Q,D as X,E as Y,k as A,y as G}from"./chunk-GZ4CUKNH.js";import{Gb as c,Hb as q,Ib as L,K as H,Kb as v,Lb as w,Mb as S,Na as d,Ob as E,Pb as m,U as C,Y as N,Ya as P,Z as k,Za as B,db as b,fb as y,ga as O,ia as f,ib as h,ja as g,kb as u,pa as F,pb as i,qb as n,rb as p,rc as T,sc as D,v as M,vb as x,wb as U,xb as a,z as j}from"./chunk-OND53OBX.js";import"./chunk-CWTPBX7D.js";function W(t,s){let e=!s?.manualCleanup;e&&!s?.injector&&O(W);let r=e?s?.injector?.get(F)??C(F):null,o;s?.requireSync?o=P({kind:0}):o=P({kind:1,value:s?.initialValue});let l=t.subscribe({next:_=>o.set({kind:1,value:_}),error:_=>{if(s?.rejectErrors)throw _;o.set({kind:2,error:_})}});return r?.onDestroy(l.unsubscribe.bind(l)),T(()=>{let _=o();switch(_.kind){case 1:return _.value;case 2:throw _.error;case 0:throw new H(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var pe=()=>({width:"100%",maxWidth:"280px",aspectRatio:"1",borderRadius:"10%",objectFit:"cover",boxShadow:"0 0 5px 0 rgba(0, 0, 0, 0.2)"}),R=()=>({width:"-webkit-fill-available"}),le=(()=>{class t{constructor(){this.datosPersonales=B()}cargarFotografiaURL(){return this.datosPersonales()?.fotografia?z.STORAGE_URL+this.datosPersonales()?.fotografia:"assets/images/notImage.png"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=k({type:t,selectors:[["app-cabecera-datos-personales"]],inputs:{datosPersonales:[N.SignalBased,"datosPersonales"]},outputs:{datosPersonales:"datosPersonalesChange"},standalone:!0,features:[E],decls:38,vars:25,consts:[[1,"grid"],[1,"col-12","grid","pb-0",2,"width","-webkit-fill-available"],[1,"col-12","md:col-4","xl:col-3","pb-0","flex","align-items-center","justify-content-center"],[1,"flex","flex-column","justify-content-center","mx-4",2,"min-height","230px","min-width","190px"],["alt","avatar","loading","lazy",1,"rounded","float-right","img-thumbnail","img-fluid",3,"src","imageStyle","preview","pTooltip"],[1,"col-12","md:col-8","pb-0","mt-3","md:mt-0"],[1,"w-full","h-full","flex","align-items-center"],[1,"w-full"],[1,"field","grid"],["for","nombre",1,"col-fixed","custom-col-fixed-cabecera-label"],[1,"col-fixed","custom-col-fixed-cabecera-value-text"],["id","nombre"],["for","apellido1",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","apellido1"],["for","apellido2",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","apellido2"],["for","dniNie",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","dniNie"],["for","numeroTarjeta",1,"col-fixed","custom-col-fixed-cabecera-label"],["id","numeroTarjeta"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p(4,"p-image",4),n()(),i(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),c(10," Nombre "),n(),i(11,"div",10)(12,"span",11),c(13),n()()(),i(14,"div",8)(15,"label",12),c(16," 1er apellido "),n(),i(17,"div",10)(18,"span",13),c(19),n()()(),i(20,"div",8)(21,"label",14),c(22," 2do apellido "),n(),i(23,"div",10)(24,"span",15),c(25),n()()(),i(26,"div",8)(27,"label",16),c(28," DNI "),n(),i(29,"div",10)(30,"span",17),c(31),n()()(),i(32,"div",8)(33,"label",18),c(34," Numero Tarjeta "),n(),i(35,"div",10)(36,"span",19),c(37),n()()()()()()()()),r&2&&(d(4),y("src",o.cargarFotografiaURL())("imageStyle",m(19,pe))("preview",!0)("pTooltip",o.cargarFotografiaURL()==="assets/images/notImage.png"?"No hay imagen del personal":"Ver imagen del personal"),d(8),h(m(20,R)),d(),L(" ",o.datosPersonales().nombre," "),d(5),h(m(21,R)),d(),L(" ",o.datosPersonales().apellido1," "),d(5),h(m(22,R)),d(),L(" ",o.datosPersonales().apellido2," "),d(5),h(m(23,R)),d(),L(" ",o.datosPersonales().dniNie," "),d(5),h(m(24,R)),d(),L(" ",o.datosPersonales().numeroTarjeta," "))},dependencies:[I,V,$]})}}return t})();var ue=()=>({position:"sticky",top:"5rem",background:"var(--surface-ground)",zIndex:10,paddingTop:"0.5rem"});function me(t,s){if(t&1){let e=x();i(0,"div",3)(1,"p-button",4),U("onClick",function(){f(e);let o=a(2);return g(o.back())}),n(),i(2,"h3",5),c(3),n()()}if(t&2){let e=a(2);d(3),q(e.titulo())}}function _e(t,s){if(t&1&&p(0,"p-button",6)(1,"p-button",7)(2,"p-button",8)(3,"p-button",9),t&2){let e=a(2);y("routerLink","/personal/datos-personales/"+e.idPersona())("outlined",e.page()!==1),d(),y("routerLink","/personal/datos-laborales/"+e.idPersona())("outlined",e.page()!==2),d(),y("routerLink","/personal/situacion-laboral/"+e.idPersona())("outlined",e.page()!==3),d(),y("routerLink","/personal/plantillas/"+e.idPersona())("outlined",e.page()!==4)}}function Ce(t,s){if(t&1){let e=x();i(0,"app-datos-personales",11),S("datosPersonalesChange",function(o){f(e);let l=a(3);return w(l.datosPersonales,o)||(l.datosPersonales=o),g(o)}),n()}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales)}}function fe(t,s){if(t&1&&b(0,Ce,1,1,"app-datos-personales",10),t&2){let e=a(2);u(0,e.datosPersonales()?0:-1)}}function ge(t,s){if(t&1){let e=x();i(0,"app-cabecera-datos-personales",11),S("datosPersonalesChange",function(o){f(e);let l=a(3);return w(l.datosPersonales,o)||(l.datosPersonales=o),g(o)}),n(),p(1,"hr")}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales)}}function be(t,s){if(t&1){let e=x();i(0,"app-datos-comunes",13),S("datosComunesChange",function(o){f(e);let l=a(3);return w(l.datosComunes,o)||(l.datosComunes=o),g(o)}),n()}if(t&2){let e=a(3);v("datosComunes",e.datosComunes)}}function he(t,s){if(t&1&&b(0,ge,2,1)(1,be,1,1,"app-datos-comunes",12),t&2){let e=a(2);u(0,e.datosPersonales()?0:-1),d(),u(1,e.datosComunes()?1:-1)}}function xe(t,s){if(t&1){let e=x();i(0,"app-cabecera-datos-personales",11),S("datosPersonalesChange",function(o){f(e);let l=a(3);return w(l.datosPersonales,o)||(l.datosPersonales=o),g(o)}),n(),p(1,"hr")}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales)}}function Pe(t,s){if(t&1){let e=x();i(0,"app-situacion-laboral",15),S("situacionLaboralChange",function(o){f(e);let l=a(3);return w(l.situacionLaboral,o)||(l.situacionLaboral=o),g(o)}),n()}if(t&2){let e=a(3);v("situacionLaboral",e.situacionLaboral)}}function ye(t,s){if(t&1&&b(0,xe,2,1)(1,Pe,1,1,"app-situacion-laboral",14),t&2){let e=a(2);u(0,e.datosPersonales()?0:-1),d(),u(1,e.situacionLaboral()?1:-1)}}function ve(t,s){if(t&1){let e=x();i(0,"app-cabecera-datos-personales",11),S("datosPersonalesChange",function(o){f(e);let l=a(3);return w(l.datosPersonales,o)||(l.datosPersonales=o),g(o)}),n(),p(1,"hr")}if(t&2){let e=a(3);v("datosPersonales",e.datosPersonales)}}function we(t,s){if(t&1&&(b(0,ve,2,1),p(1,"app-plantillas")),t&2){let e=a(2);u(0,e.datosPersonales()?0:-1)}}function Se(t,s){if(t&1&&(i(0,"div")(1,"p-toolbar",0),b(2,me,4,1,"ng-template",1)(3,_e,4,8,"ng-template",2),n(),p(4,"hr"),n(),b(5,fe,1,1)(6,he,2,2)(7,ye,2,2)(8,we,2,1)),t&2){let e,r=a();h(m(3,ue)),d(5),u(5,(e=r.page())===1?5:e===2?6:e===3?7:e===4?8:-1)}}function Te(t,s){t&1&&(i(0,"div",16),p(1,"p-progressSpinner"),n())}var st=(()=>{class t{constructor(){this.router=C(X),this.datosPersonalesService=C(oe),this.datosComunesService=C(ie),this.messageService=C(te),this.title=C(G),this.urlState=W(this.router.events.pipe(M(e=>e instanceof Q))),this.idPersona=T(()=>this.urlState()&&this.urlState().url.split("/")[3]?(sessionStorage.setItem("idPersona",this.urlState().url.split("/")[3]),this.urlState().url.split("/")[3]):this.router.url.split("/")[3]?(sessionStorage.setItem("idPersona",this.router.url.split("/")[3]),this.router.url.split("/")[3]):sessionStorage.getItem("idPersona")),this.page=T(()=>this.urlState()?this.urlState().url.includes("datos-personales")?(this.title.setTitle(`RRHH - Datos Personales (${this.idPersona()})`),1):this.urlState().url.includes("datos-laborales")?(this.title.setTitle(`RRHH - Datos Laborales (${this.idPersona()})`),2):this.urlState().url.includes("situacion-laboral")?(this.title.setTitle(`RRHH - Situaci\xF3n Laboral (${this.idPersona()})`),3):(this.title.setTitle(`RRHH - Plantillas (${this.idPersona()})`),4):this.router.url.includes("datos-personales")?(this.title.setTitle(`RRHH - Datos Personales (${this.idPersona()})`),1):this.router.url.includes("datos-laborales")?(this.title.setTitle(`RRHH - Datos Laborales (${this.idPersona()})`),2):this.router.url.includes("situacion-laboral")?(this.title.setTitle(`RRHH - Situaci\xF3n Laboral (${this.idPersona()})`),3):(this.title.setTitle(`RRHH - Plantillas (${this.idPersona()})`),4)),this.titulo=T(()=>this.page()===1?"Datos Personales":this.page()===2?"Datos Laborales":this.page()===3?"Situation Laboral":"Plantillas"),this.datosPersonales=P(null),this.datosComunes=P(null),this.situacionLaboral=P(null),this.loading=T(()=>!!this.datosPersonales()||!!this.datosComunes()),D(()=>{this.cargarDatos()},{allowSignalWrites:!0}),D(()=>{console.warn("Cambiaron los datos personales",this.datosPersonales())}),D(()=>{console.warn("Cambiaron los datos comunes",this.datosComunes())}),D(()=>{console.warn("Cambiaron la situacion laboral",this.situacionLaboral())})}ngOnInit(){console.warn("Modulo de Personal")}cargarDatos(){this.cargarDatosPersonales(),this.cargarDatosComunes()}cargarDatosPersonales(){this.datosPersonales.set(null),this.datosPersonalesService.get(this.idPersona()).pipe(j(1)).subscribe({next:e=>{this.datosPersonales.set(e)},error:e=>{console.error(e),this.messageService.error(e.error.message??"Error desconocido al cargar los datos personales")}})}cargarDatosComunes(){this.datosComunes.set(null),this.datosComunesService.get(this.idPersona()).pipe(j(1)).subscribe({next:e=>{this.datosComunes.set(e)},error:e=>{console.error(e),this.messageService.error(e.error.message??"Error desconocido al cargar los datos comunes")}})}back(){let e=sessionStorage.getItem("previousPersonalPage");e?this.router.navigateByUrl(e):this.router.navigate(["/"])}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=k({type:t,selectors:[["app-personal"]],standalone:!0,features:[E],decls:2,vars:1,consts:[["styleClass","toolbar-sin-bordes"],["pTemplate","left"],["pTemplate","right"],[1,"my-2","flex","flex-row","align-items-center"],["type","button","icon","pi pi-arrow-left","pTooltip","Volver a la b\xFAsqueda","tooltipPosition","top","styleClass","p-button-rounded mr-2",3,"onClick"],[1,"m-0"],["icon","pi pi-user","label","Datos Personales","pTooltip","Ver datos personales","tooltipPosition","top","styleClass","mr-2",3,"routerLink","outlined"],["icon","pi pi-book","label","Datos Laborales","pTooltip","Ver datos personales","tooltipPosition","top","styleClass","mr-2",3,"routerLink","outlined"],["icon","pi pi-briefcase","label","Situacion Laboral","pTooltip","Ver datos personales","tooltipPosition","top","styleClass","mr-2",3,"routerLink","outlined"],["icon","pi pi-file-export","label","Plantillas","pTooltip","Ver plantillas","tooltipPosition","top",3,"routerLink","outlined"],[3,"datosPersonales"],[3,"datosPersonalesChange","datosPersonales"],[3,"datosComunes"],[3,"datosComunesChange","datosComunes"],[3,"situacionLaboral"],[3,"situacionLaboralChange","situacionLaboral"],[1,"hold-transition","login-page","flex","justify-content-center","align-items-center",2,"height","80dvh"]],template:function(r,o){r&1&&b(0,Se,9,4)(1,Te,2,0),r&2&&u(0,o.loading()?0:1)},dependencies:[A,I,J,K,Z,Y,V,ee,ne,ae,se,re,le]})}}return t})();export{st as PersonalComponent};
